<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WoofingPump - Launch Your Token</title>
    <link rel="icon" type="image/png" href="https://woofswap.finance/image/tokens/WOOF.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0068FF',
                        secondary: '#18E5A0',
                        accent: '#FFD700',
                        dark: '#070808',
                        'light-gray': '#E5E7EB'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        display: ['Changa One', 'system-ui', 'sans-serif']
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite'
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-8px)' }
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow-glow { text-shadow: 0 0 10px rgba(0, 104, 255, 0.5); }
            .glow-border { box-shadow: 0 0 12px rgba(24, 229, 160, 0.3); }
            .bg-grid {
                background-image: url('data:image/svg+xml,%3Csvg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E%3Ccircle cx="1" cy="1" r="1" fill="%230068FF" fill-opacity="0.1"/%3E%3C/svg%3E');
                background-size: 20px 20px;
            }
            .input-field {
                @apply w-full px-4 py-3 bg-dark/80 border border-primary/30 rounded-lg text-white placeholder-light-gray/70 focus:outline-none focus:border-secondary focus:ring-2 focus:ring-secondary/30 transition-all duration-300;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&family=Changa+One&display=swap" rel="stylesheet">
</head>
<body class="bg-dark text-white font-sans overflow-x-hidden">
    <header class="fixed w-full z-50 bg-dark/90 backdrop-blur-md transition-all duration-300">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3 cursor-pointer hover:text-primary transition-colors" onclick="fillExample()">
                <div class="w-10 h-10 rounded-full overflow-hidden">
                    <img src="https://woofswap.finance/image/tokens/WOOF.png" alt="WOOF Logo" class="w-full h-full object-cover">
                </div>
                <span class="font-display text-3xl text-primary text-shadow-glow">WoofingPump</span>
            </div>
            <button id="menuToggle" class="md:hidden text-2xl text-primary">
                <i class="fa fa-bars"></i>
            </button>
        </div>
    </header>

    <section id="launch" class="min-h-screen pt-24 pb-16 bg-grid relative overflow-hidden flex items-center justify-center">
        <div class="absolute inset-0 bg-gradient-to-b from-primary/10 to-dark pointer-events-none"></div>
        <div class="absolute top-0 left-0 w-80 h-80 bg-primary/10 rounded-full blur-3xl"></div>
        <div class="absolute bottom-0 right-0 w-80 h-80 bg-secondary/10 rounded-full blur-3xl"></div>
        <div class="container mx-auto px-4 text-center relative z-10">
            <div class="w-48 h-48 mx-auto mb-4 animate-float cursor-pointer" onclick="fillExample()">
                <img src="https://woofswap.finance/image/tokens/WOOF.png" alt="WOOF Logo" class="w-full h-full object-cover rounded-full border-4 border-secondary/50 glow-border">
            </div>
            
            <h1 class="font-display text-5xl md:text-7xl mb-6 text-primary text-shadow-glow">WoofingPump</h1>
            <p class="text-xl md:text-2xl text-light-gray max-w-3xl mx-auto mb-10">
                Launch your meme token on BSC with bonding curve â€” instant trade, no presale.
            </p>

            <div class="bg-dark/50 p-8 rounded-xl border border-primary/30 max-w-lg mx-auto">
                <div class="flex flex-col space-y-6">
                    <button id="connectWalletButton" class="w-full px-6 py-3 bg-primary text-white rounded-full font-medium hover:bg-primary/80 transition-all shadow-lg">Connect Wallet</button>
                    <p id="networkStatus" class="text-light-gray text-sm">Click to connect to BSC...</p>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-left text-sm text-light-gray">
                        <div>Factory: <span class="text-primary font-mono">0x7671...f1D2</span></div>
                        <div id="tokensCount">Tokens Launched: 0</div>
                        <div id="userTokensCount">Your Tokens: 0</div>
                    </div>

                    <div>
                        <label class="block text-left text-light-gray mb-2 font-medium">Token Name</label>
                        <input id="tokenName" type="text" placeholder="e.g. Woof Dog" class="input-field">
                    </div>

                    <div>
                        <label class="block text-left text-light-gray mb-2 font-medium">Token Symbol</label>
                        <input id="tokenSymbol" type="text" placeholder="e.g. WOOF" class="input-field" maxlength="8">
                    </div>

                    <button id="launchButton" class="w-full px-6 py-3 bg-secondary text-dark rounded-full font-medium hover:bg-secondary/80 transition-all disabled:bg-dark/50 disabled:cursor-not-allowed shadow-lg" disabled>Launch Token ðŸš€</button>

                    <p id="progressStatus" class="text-light-gray text-sm">Connect wallet and fill name/symbol to launch</p>

                    <div id="userTokensList" class="text-left text-sm text-light-gray max-h-40 overflow-y-auto hidden">
                        <p class="font-medium mb-2">Your Launched Tokens:</p>
                        <ul id="tokensUl" class="list-disc pl-5"></ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-dark/95 py-12 border-t border-primary/20">
        <div class="container mx-auto px-4 text-center">
            <p class="text-light-gray text-sm">Â© 2026 WoofingPump. DYOR â€” High Risk Meme Launch Platform.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/web3@1.7.0/dist/web3.min.js"></script>
    <script>
        const FACTORY_ADDRESS = '0x7671Ad453Ddeb2230C96F36ffffA106bBD42f1D2';
        const BSC_CHAIN_ID = 56;
        const BSC_RPC = 'https://bsc-dataseed.binance.org/';

        const factoryAbi = [
            {"inputs":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"string","name":"_symbol","type":"string"}],"name":"createToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"nonpayable","type":"function"},
            {"inputs":[],"name":"getDeployedTokensCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getUserTokenCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
            {"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getUserTokenIds","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},
            {"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getTokenAddressById","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}
        ];

        let web3, account, factoryContract;

        async function initWeb3() {
            if (window.ethereum) {
                web3 = new Web3(window.ethereum);
                try {
                    await window.ethereum.request({ method: 'eth_requestAccounts' });
                    account = (await web3.eth.getAccounts())[0];
                    document.getElementById('connectWalletButton').innerText = `Connected: ${account.slice(0,6)}...${account.slice(-4)}`;
                    await switchToBSC();
                    factoryContract = new web3.eth.Contract(factoryAbi, FACTORY_ADDRESS);
                    updateFactoryInfo();
                    updateUserInfo();
                    document.getElementById('networkStatus').innerText = 'Connected to BSC Mainnet';
                } catch (err) {
                    document.getElementById('networkStatus').innerText = 'Connection failed';
                    document.getElementById('progressStatus').innerText = `Error: ${err.message}`;
                }
            } else {
                document.getElementById('networkStatus').innerText = 'Please install MetaMask';
            }
        }

        async function switchToBSC() {
            try {
                await window.ethereum.request({
                    method: 'wallet_switchEthereumChain',
                    params: [{ chainId: `0x${BSC_CHAIN_ID.toString(16)}` }]
                });
            } catch (switchError) {
                if (switchError.code === 4902) {
                    await window.ethereum.request({
                        method: 'wallet_addEthereumChain',
                        params: [{
                            chainId: `0x${BSC_CHAIN_ID.toString(16)}`,
                            chainName: 'BNB Smart Chain',
                            rpcUrls: [BSC_RPC],
                            nativeCurrency: { name: 'BNB', symbol: 'BNB', decimals: 18 },
                            blockExplorerUrls: ['https://bscscan.com']
                        }]
                    });
                } else {
                    throw switchError;
                }
            }
        }

        async function updateFactoryInfo() {
            try {
                const count = await factoryContract.methods.getDeployedTokensCount().call();
                document.getElementById('tokensCount').innerText = `Tokens Launched: ${count}`;
            } catch (e) {
                document.getElementById('progressStatus').innerText = 'Failed to load factory info';
            }
        }

        async function updateUserInfo() {
            if (!account) return;
            try {
                const userCount = await factoryContract.methods.getUserTokenCount(account).call();
                document.getElementById('userTokensCount').innerText = `Your Tokens: ${userCount}`;

                if (userCount > 0) {
                    const ids = await factoryContract.methods.getUserTokenIds(account).call();
                    const ul = document.getElementById('tokensUl');
                    ul.innerHTML = '';
                    for (let id of ids) {
                        const tokenAddr = await factoryContract.methods.getTokenAddressById(id).call();
                        const li = document.createElement('li');
                        li.innerHTML = `ID ${id}: <a href="https://bscscan.com/address/${tokenAddr}" target="_blank" class="text-primary hover:underline">${tokenAddr}</a>`;
                        ul.appendChild(li);
                    }
                    document.getElementById('userTokensList').classList.remove('hidden');
                }
            } catch (e) {}
        }

        function checkLaunchReady() {
            const name = document.getElementById('tokenName').value.trim();
            const symbol = document.getElementById('tokenSymbol').value.trim();
            document.getElementById('launchButton').disabled = !(name && symbol && web3 && account);
        }

        async function launchToken() {
            const name = document.getElementById('tokenName').value.trim();
            const symbol = document.getElementById('tokenSymbol').value.trim();
            if (!name || !symbol) return;

            const button = document.getElementById('launchButton');
            button.disabled = true;
            button.innerHTML = 'Launching... <i class="fa fa-spinner fa-spin ml-2"></i>';
            document.getElementById('progressStatus').innerText = 'Sending transaction...';

            try {
                const tx = await factoryContract.methods.createToken(name, symbol).send({
                    from: account,
                    gas: 3000000
                });
                document.getElementById('progressStatus').innerText = `Success! Tx: ${tx.transactionHash.slice(0,10)}... Check your new token on BSCScan.`;
                updateFactoryInfo();
                updateUserInfo();
            } catch (err) {
                document.getElementById('progressStatus').innerText = `Error: ${err.message}`;
            } finally {
                button.disabled = false;
                button.innerHTML = 'Launch Token ðŸš€';
            }
        }

        function fillExample() {
            document.getElementById('tokenName').value = 'Woof Example';
            document.getElementById('tokenSymbol').value = 'WOOFEX';
            checkLaunchReady();
        }

        document.getElementById('connectWalletButton').addEventListener('click', initWeb3);
        document.getElementById('launchButton').addEventListener('click', launchToken);
        document.getElementById('tokenName').addEventListener('input', checkLaunchReady);
        document.getElementById('tokenSymbol').addEventListener('input', checkLaunchReady);
    </script>
</body>
</html>
